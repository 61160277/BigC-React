(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4900],{94900:function(t,l,e){"use strict";e.d(l,{Z:function(){return C}});var n,i=e(23842),o=e(9722),a=e(70169),r=e(59312),u=e(24246),c=e(77230),d=e(66964),s=e(96093),v=e(63415),_=e(68675),y=e(73608),p=e(38944),f=e(23615),m=e.n(f),x=e(27378),g=e(92026),h=e(70539),q=e(86677),b=e(7681),k=e.n(b);function A(t){var l=t.productInCart,e=t.productDetail,n=t.trackingData,i=t.showQty,r=t.setIsQtyActive,d=t.handleClickOutside,y=function(){var t=null==n?void 0:n.widgetId,l=null==n?void 0:n.widgetType,i=null==n?void 0:n.position,o=null==n?void 0:n.widgetName;return{category:(null==n?void 0:n.category)||"widget_".concat(l,"_").concat(i,"_").concat(o).concat(t?"_".concat(t):""),label:(null==n?void 0:n.label)||"product_"+e.name,value:null==n?void 0:n.value}},f=(0,q.useRouter)(),m=(0,s.r)().trackEcommerce,g=(0,x.useContext)(c.A9),b=g.cartState.cart,A=g.cartDispatch,j=(0,_.f)().selectedWarehouse,w=null==j?void 0:j.store_id,C=!((null==e?void 0:e.qty)>0)||e.safety_stock>=(null==e?void 0:e.qty),D=function(){if((null==e?void 0:e.product_type)!=="single"||(null==e?void 0:e.extra_services)||(null==e?void 0:e.sell_in_kg)){var t={pathname:"/product/[slug]",query:{slug:(0,h.Z)(e)}};f.push(t),m({category:y().category,action:"select_content",label:y().label,value:y().value,product:(0,a.Z)((0,o.Z)({},e),{storeId:w})});return}(null==l?void 0:l.qty)||(0,v.dA)({storeId:w,product:e,cart:b,cartDispatch:A,trackingData:{trackFunc:m,category:y().category,label:y().label,value:y().value,product:(0,a.Z)((0,o.Z)({},e),{storeId:w})}}),document.addEventListener("mousedown",d),r(!0)},Z=i&&(null==l?void 0:l.qty)>0&&!C&&(null==e?void 0:e.product_type)==="single"&&!(null==e?void 0:e.sell_in_kg);return(0,u.jsx)("button",{className:(0,p.Z)(k().addtocart_btn,Z&&k().active),disabled:C&&(null==e?void 0:e.product_type)==="single",onClick:function(){D()},children:Z?(0,u.jsx)("span",{className:k().qty_number,children:null==l?void 0:l.qty}):(0,u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 18 18",children:[(0,u.jsx)("path",{d:"M17.035,3.058a2.245,2.245,0,0,0-1.727-.808H3.181L3.15,1.987A2.25,2.25,0,0,0,.916,0H.75a.75.75,0,0,0,0,1.5H.916a.75.75,0,0,1,.745.662l1.032,8.775A3.75,3.75,0,0,0,6.418,14.25H14.25a.75.75,0,1,0,0-1.5H6.418A2.25,2.25,0,0,1,4.3,11.25h8.94a3.75,3.75,0,0,0,3.691-3.085L17.522,4.9a2.246,2.246,0,0,0-.488-1.842ZM16.05,4.634,15.46,7.9A2.25,2.25,0,0,1,13.243,9.75H4.064l-.706-6H15.307a.75.75,0,0,1,.742.883Z"}),(0,u.jsx)("ellipse",{cx:"1.5",cy:"1.5",rx:"1.5",ry:"1.5",transform:"translate(3.75 15)"}),(0,u.jsx)("ellipse",{cx:"1.5",cy:"1.5",rx:"1.5",ry:"1.5",transform:"translate(11.25 15)"})]})})}A.propTypes={productDetail:m().object.isRequired,trackingData:m().object,productInCart:m().object,showQty:m().bool,setIsQtyActive:m().func,handleClickOutside:m().func,qtyToFocus:m().number};var j=e(14751),w=e.n(j);function C(t){var l,e=t.productDetail,f=t.disabled,m=t.type,h=void 0===m?"pdp":m,q=t.size,b=void 0===q?"default":q,k=t.trackingData,j=t.onClickAddToCart,C=t.onDecreaseQty,D=t.onIncreaseQty,Z=(0,x.useRef)(),I=(0,y.F)().isMobile,S=(0,s.r)().trackEcommerce,H=(0,g.$)("common"),E=H.t,N=H.i18n,Q=(0,x.useState)(0),T=Q[0],L=Q[1],M=(0,x.useState)(0),B=M[0],F=M[1],R=(0,x.useState)(!1),O=R[0],W=R[1],X=(0,x.useState)(0),z=X[0],G=X[1],K=(0,x.useContext)(c.A9),P=K.cartState.cart,U=K.cartDispatch,Y=(0,_.f)().selectedWarehouse,$=null==Y?void 0:Y.store_id,J="cart_modal"!==h?null==P?void 0:null===(tx=P.cart_items)||void 0===tx?void 0:tx.find(function(t){return(null==e?void 0:e.selectedExtraService)?t.product_id===(null==e?void 0:e.product_id)&&(null==t?void 0:t.is_extra_service_id)===(null==e?void 0:e.selectedExtraService.id):t.product_id===(null==e?void 0:e.product_id)}):e,V=(0,x.useMemo)(function(){var t=null==e?void 0:e.qty;if(null==e?void 0:e.variants_data){var l=0,n=!0,i=!1,o=void 0;try{for(var a,r=e.variants_data[0].variant_value[Symbol.iterator]();!(n=(a=r.next()).done);n=!0){var u=a.value;l+=u.qty}}catch(c){i=!0,o=c}finally{try{n||null==r.return||r.return()}finally{if(i)throw o}}t=l}return t},[null==e?void 0:e.product_id]),tt=function(t){var l;(null===(l=Z.current)||void 0===l?void 0:l.contains(t.target))||(document.removeEventListener("mousedown",tt),W(!1))},tl={trackFunc:S,category:null==k?void 0:k.category,label:null==k?void 0:k.label,product:(0,a.Z)((0,o.Z)({},e),{qtyInCart:null==J?void 0:J.qty,storeId:$}),value:null==k?void 0:k.value},te=!((null!==(tg=null==e?void 0:e.qty)&&void 0!==tg?tg:V)>0)||(null==e?void 0:e.safety_stock)>=(null!==(th=null==e?void 0:e.qty)&&void 0!==th?th:V);function tn(){return(tn=(0,i.Z)(function(t){var l;return(0,r.__generator)(this,function(l){return 0!==t&&(F(0),L((T||0)+t),G((z||0)+t),("inc"==(t>0?"inc":"dec")?v.A4:v.wr)({storeId:$,cartDispatch:U,product:(0,a.Z)((0,o.Z)({},J),{atc_qty:Math.abs(t)}),trackingData:tl})),[2]})})).apply(this,arguments)}(0,x.useEffect)(function(){!n&&((null==J?void 0:J.qty)?((null==e?void 0:e.selectedExtraService)&&G(tu),L(null==J?void 0:J.qty)):(L(0),(null==e?void 0:e.selectedExtraService)&&G(0)))},[null==J?void 0:J.qty]),(0,x.useEffect)(function(){L(null==J?void 0:J.qty),G(tu),F(0)},[null==e?void 0:e.product_id]),(0,x.useEffect)(function(){G(tu)},[null==e?void 0:e.selectedExtraService]);var ti=function(t,l){var e=this;return function(){for(var l=arguments.length,i=Array(l),o=0;o<l;o++)i[o]=arguments[o];n&&clearTimeout(n),n=setTimeout(function(){n=null,t.apply(e,i)},500)}}(function(t){return tn.apply(this,arguments)},500),to=function(t){F(t),ti(t)},ta=!!(null==e?void 0:e.sell_in_kg)||(null==e?void 0:e.extra_services)||(null==e?void 0:e.product_type)!=="single"||!!(null==e?void 0:e.sell_in_kg)&&(null==e?void 0:e.extra_services),tr=Array.isArray(null==e?void 0:e.extra_services)&&(null==e?void 0:e.extra_services.length)>0,tu=tr&&(null==P?void 0:P.cart_items)?null==P?void 0:P.cart_items.filter(function(t){return(null==t?void 0:t.product_id)===(null==e?void 0:e.product_id)}).reduce(function(t,l){return t+l.qty},0):0,tc=function(){j&&j(),(I&&"pdp"===h||"search_modal"===h)&&ta||(0,v.dA)({storeId:$,cart:P,cartDispatch:U,product:e,extraServiceData:null==e?void 0:e.selectedExtraService,trackingData:tl})},td=function(){return(0,u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 18 18",children:[(0,u.jsx)("path",{d:"M17.035,3.058a2.245,2.245,0,0,0-1.727-.808H3.181L3.15,1.987A2.25,2.25,0,0,0,.916,0H.75a.75.75,0,0,0,0,1.5H.916a.75.75,0,0,1,.745.662l1.032,8.775A3.75,3.75,0,0,0,6.418,14.25H14.25a.75.75,0,1,0,0-1.5H6.418A2.25,2.25,0,0,1,4.3,11.25h8.94a3.75,3.75,0,0,0,3.691-3.085L17.522,4.9a2.246,2.246,0,0,0-.488-1.842ZM16.05,4.634,15.46,7.9A2.25,2.25,0,0,1,13.243,9.75H4.064l-.706-6H15.307a.75.75,0,0,1,.742.883Z"}),(0,u.jsx)("ellipse",{cx:"1.5",cy:"1.5",rx:"1.5",ry:"1.5",transform:"translate(3.75 15)"}),(0,u.jsx)("ellipse",{cx:"1.5",cy:"1.5",rx:"1.5",ry:"1.5",transform:"translate(11.25 15)"})]})},ts=I&&"pdp"===h&&ta,tv=T>=0?T+B:null==J?void 0:J.qty,t_=(null==e?void 0:e.sell_in_kg)?T+B===(null==e?void 0:e.sell_in_kg_step):T+B===1,ty=(null==e?void 0:e.sell_in_kg)===1?parseFloat(null==e?void 0:e.sell_in_kg_step):1,tp="cart_modal"==h;if((!tv||f||"plp"===h&&!O)&&!tp||T&&ta&&("search_modal"===h||I&&"pdp"===h)&&!O)return"plp"===h?(0,u.jsx)(A,{showQty:T+B>=1,productInCart:J,productDetail:e,trackingData:k,setIsQtyActive:W,handleClickOutside:tt}):(0,u.jsxs)("button",{className:w().button,disabled:f||te||tr&&tu>=(null==e?void 0:e.qty)-(null!==(tm=null==e?void 0:e.safety_stock)&&void 0!==tm?tm:0)||(null==e?void 0:e.max_qty)&&tu>=(null==e?void 0:e.max_qty)||!!(null==e?void 0:e.sell_in_kg)&&tu+(null==e?void 0:e.sell_in_kg_step)>(null==e?void 0:e.qty),onClick:function(){tc()},children:[E("common:add-to-cart"),!tp||"search_modal"===h&&(0,u.jsx)(td,{})]});if("cart_modal"===h){var tf=(T||e.qty)+B;tq=(null==e?void 0:e.is_extra_service)?tf+(null==e?void 0:e.is_extra_service_other_qty)>=e.qty_available&&(null==e?void 0:e.cart_type)!=="offline"||(null==e?void 0:e.max_qty)>0&&tf+(null==e?void 0:e.is_extra_service_other_qty)>=(null==e?void 0:e.max_qty):tf>=e.qty_available&&(null==e?void 0:e.cart_type)!=="offline"||(null==e?void 0:e.max_qty)>0&&tf>=(null==e?void 0:e.max_qty)}else{var tm,tx,tg,th,tq,tb,tk=(tr?z:T)+B;tq=tk>=(null==e?void 0:e.qty)-(null!==(tb=null==e?void 0:e.safety_stock)&&void 0!==tb?tb:0)||(null==e?void 0:e.max_qty)&&tk>=(null==e?void 0:e.max_qty)||!!(null==e?void 0:e.sell_in_kg)&&tk+(null==e?void 0:e.sell_in_kg_step)>(null==e?void 0:e.qty)||tk===(null==e?void 0:e.qty)}return("cart_modal"===h?T+B:T)&&(null==J?void 0:J.qty)?(0,u.jsxs)("div",{ref:Z,className:(0,p.Z)(w().qty_area,w()[b]||w().default),children:[(0,u.jsx)("button",{className:(0,p.Z)(w().minus,t_&&w().remove),onClick:function(){!ts&&T+B&&T+B&&to(B-ty),C&&C()}}),T>0&&(null==J?void 0:J.qty)&&((null==e?void 0:e.sell_in_kg)?"".concat((-1===(null==(l=(0,d.B)(T+B))?void 0:l.indexOf("."))&&(l+=".0"),l)," ").concat("en"===N.language?null==e?void 0:e.unit_en:null==e?void 0:e.unit):"".concat(T+B>0?T+B:"")),(0,u.jsx)("button",{className:w().plus,disabled:tq,onClick:function(){!ts&&(tq||to(B+ty)),D&&D()}})]}):"pdp"===h?(0,u.jsxs)("div",{className:(0,p.Z)(w().qty_area,w()[b]||w().default),children:[(0,u.jsx)("button",{className:(0,p.Z)(w().minus,w().remove)}),(0,u.jsx)("button",{className:w().plus,disabled:tq})]}):void 0}C.propTypes={productDetail:m().object.isRequired,disabled:m().bool,type:m().string,size:m().string,trackingData:m().object,onClickAddToCart:m().func,onDecreaseQty:m().func,onIncreaseQty:m().func,onCallBackProductCard:null===m()||void 0===m()?void 0:m().func}},70539:function(t,l,e){"use strict";function n(t){var l=(""!==t.slug?t.slug:t.name_en)||"";return""===t.slug&&(l=(l=(l=(l=(l=l.toLowerCase()).replaceAll(" & "," ")).replaceAll("&","")).replaceAll(".","")).replaceAll(" ","-")),"".concat(l,".").concat(t.product_id)}e.d(l,{Z:function(){return n}})},14751:function(t){t.exports={button:"button_button__pXIxB",qty_area:"button_qty_area__juuSs",default:"button_default__3W7SA",minus:"button_minus__t7mBX",plus:"button_plus__Go4C0",remove:"button_remove__yUnnG",small:"button_small__ottiK"}},7681:function(t){t.exports={addtocart_btn:"circle_addtocart_btn__qH0fe",active:"circle_active__3uf5Z",qty_number:"circle_qty_number__gRSYT",fadeInAnimation:"circle_fadeInAnimation___8aX9",choose_qty:"circle_choose_qty__HnDmj"}}}]);